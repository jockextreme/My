<!DOCTYPE html>
<html>
<head>
    <title>JAVHD Browser</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .search-box { margin-bottom: 20px; }
        .results { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; }
        .card { border: 1px solid #ddd; border-radius: 5px; padding: 10px; cursor: pointer; }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .video-container { margin-top: 20px; }
        video { width: 100%; max-width: 800px; }
    </style>
</head>
<body>
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search...">
        <button onclick="search()">Search</button>
    </div>
    
    <div id="results" class="results"></div>
    
    <div class="video-container">
        <video id="videoPlayer" controls></video>
    </div>

    <script>
        const API_KEY = '625156d0d268e4633b97980c0dc859d0';
        const BASE_URL = 'https://api.zetsu.xyz/javhd';

        async function search() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;

            try {
                const response = await fetch(
                    `${BASE_URL}?action=search&query=${encodeURIComponent(query)}&apikey=${API_KEY}`
                );
                
                if (!response.ok) throw new Error('API Error');
                const data = await response.json();
                
                displayResults(data);
            } catch (error) {
                alert('Search failed: ' + error.message);
            }
        }

        function displayResults(items) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = items.map(item => `
                <div class="card" onclick="showDetail('${item.url}')">
                    <img src="${item.thumb}" alt="${item.title}">
                    <h3>${item.title}</h3>
                    <p>${item.code}</p>
                </div>
            `).join('');
        }

        async function showDetail(url) {
            try {
                const response = await fetch(
                    `${BASE_URL}?action=detail&url=${encodeURIComponent(url)}&apikey=${API_KEY}`
                );
                
                if (!response.ok) throw new Error('Detail Error');
                const detail = await response.json();
                
                playVideo(detail.videos[0].url);
            } catch (error) {
                alert('Failed to load details: ' + error.message);
            }
        }

        function playVideo(videoUrl) {
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.innerHTML = `
                <source src="${videoUrl}" type="video/mp4">
            `;
            videoPlayer.load();
            videoPlayer.play();
        }
    </script>
</body>
</html>
